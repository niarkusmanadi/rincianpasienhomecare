<!DOCTYPE html>
<html>

<head>
    <title>Form Kirim ke WhatsApp</title>
    <link rel="stylesheet" href="style.css">
    <style>
          body { font-family: Arial, sans-serif; padding: 20px; margin:auto 30px;}
    label { display: block; margin-top: 10px; }
    input { margin: 5px 0; padding: 5px; width: 200px; }
    .total { font-weight: bold; }
   
    </style>
</head>

<body>
    <h1>Form Rincian Pasien</h1>
    <form id="waForm">
        <label>Nama</label><br />
        <input type="text" id="nama" placeholder="Nama Anda" required /><br /><br />

        <label>Alamat</label><br />
        <input type="text" id="alamat" placeholder="Alamat Anda" required /><br /><br />

        <label>Jarak</label><br />
        <div class="input-group">
            <select name="jarak-pasien" required>
                <option value="">-- Pilih Jarak --</option>
                <option value="0 - 1 km" id="jarak-satu">0 - 1 km</option>
                <option value="1,1 - 2 km" id="jarak-dua">1,1 - 2 km</option>
                <option value="2,1 - 3 km" id="jarak-tiga">2,1 - 3 km</option>
                <option value="3,1 - 4 km" id="jarak-empat">3,1 - 4 km</option>
                <option value="4,1 - 5 km" id="jarak-lima">4,1 - 5 km</option>
                <option value="5,1 - 6 km" id="jarak-enam">5,1 - 6 km</option>
                <option value="6,1 - 7 km" id="jarak-tujuh">6,1 - 7 km</option>
                <option value="8,1 - 9 km" id="jarak-delapan">8,1 - 9 km</option>
            </select>
        </div>

        <label>Pasien:</label>
        <div id="pasienklinik">
            <div class="input-group">
                <select name="pasien-klinik" required>
                    <option value="">-- Pilih Pasien --</option>
                    <option value="Klinik Pratama Kedung Boto">
                        Klinik Pratama Kedung Boto
                    </option>
                    <option value="Klinik Pratama Kidal Medis">
                        Klinik Pratama Kidal Medis
                    </option>
                    <option value="Jabung Medika">Jabung Medika</option>
                    <option value="Tangkil Medis">Tangkil Medis</option>
                    <option value="Jabung Medika">Jabung Medika</option>
                    <option value="Tangkil Medis">Ketawang Medis</option>
                    <option value="Jabung Medika">Jabung Medika</option>
                    <option value="Tangkil Medis">Jeru Medika</option>
                </select>
            </div>
        </div>

        <div class="mrskrs">
            <label for="MRS">MRS</label>
            <input type="date" id="MRS" name="MRS" required>

            <label for="KRS">KRS</label>
            <input type="date" id="KRS" name="KRS" required>
        </div>

        <div class="alatalat">
            <label>1. Alat - Alat</label><br />
            <p>- Infus Set </p>
            <input type="number" id="qty-infus" required /> x Rp 25.000 = Rp
            <span id="total-infus">0</span>
            <p>- Jarum Infus Surflo </p>
            <input type="number" id="qty-surflo" required /> x Rp 27.500 = Rp
            <span id="total-surflo">0</span>
            <p>- Spuit </p>
            <input type="number" id="qty-spuit" required /> x Rp 5.000 = Rp
            <span id="total-spuit">0</span>
            <p>- Hipafix </p>
            <input type="number" id="qty-hipafix" required /> x Rp 37.500 = Rp
            <span id="total-hipafix">0</span>
        </div>

        <div class="jasapasanginfus">
            <h3>2. Jasa Pasang Infus</h3>
            <p>- Jasa Pasang Infus </p>
            <input type="number" id="qty-pasang-infus" required /> x Rp 50.000 = Rp
            <span id="total-pasang-infus">0</span><br />
            <p>- Jasa Lepas Infus </p>
            <input type="number" id="qty-lepas-infus" required /> x Rp 10.000 = Rp
            <span id="total-lepas-infus">0</span><br />
        </div>

        <div class="jasaterapidokter">
            <h3>3. Jasa Terapi Dokter</h3>
            <p>Jasa Terapi Dokter</p>
            <input type="number" id="qty-terapi-dokter" required /> x Rp 80.000 = Rp
            <span id="total-terapi-dokter">0</span><br />
        </div>

        <div class="cairan-infus">
            <h3>4. Cairan</h3>
            <br />

            <div class="item">
                <p>Cairan Dextrose NS </p>
                <input type="number" id="qty-cairan-NS" min="0" value="0" required />
                x Rp 25.000 = Rp <span id="total-cairan-NS">0</span><br />
                <button type="button" onclick="hapusItem(this)">Hapus</button>
            </div>

            <div class="item">
                <p>Cairan Asering </p>
                <input type="number" id="qty-cairan-asering" min="0" value="0" required />
                x Rp 50.000 = Rp <span id="total-cairan-asering">0</span><br />
                <button type="button" onclick="hapusItem(this)">Hapus</button>
            </div>

            <div class="item">
                <p>Cairan Paracetamol </p>
                <input type="number" id="qty-cairan-paracetamol" min="0" value="0" required />
                x Rp 70.000 = Rp <span id="total-cairan-paracetamol">0</span><br />
                <button type="button" onclick="hapusItem(this)">Hapus</button>
            </div>
            <div class="item">
                <p>Cairan Paracetamol 1/2 </p>
                <input type="number" id="qty-cairan-paracetamol2" min="0" value="0" required />
                x Rp 50.000 = Rp <span id="total-cairan-paracetamol2">0</span><br />
                <button type="button" onclick="hapusItem(this)">Hapus</button>
            </div>
            <div class="item">
                <p>Cairan Metronidazole </p>
                <input type="number" id="qty-cairan-metronidazole" min="0" value="0" required />
                x Rp 60.000 = Rp <span id="total-cairan-metronidazole">0</span><br />
                <button type="button" onclick="hapusItem(this)">Hapus</button>
            </div>
            <div class="item">
                <p>Cairan RL </p>
                <input type="number" id="qty-cairan-rl" min="0" value="0" required />
                x Rp 50.000 = Rp <span id="total-cairan-rl">0</span><br />
                <button type="button" onclick="hapusItem(this)">Hapus</button>
            </div>
        </div>
        <h3>5. Injeksi</h3>
        <div id="injeksi-container">
            <div class="injeksi">
                <select class="mcm-injeksi">
                    <option value="antibiotik" data-harga="50000">Antibiotik</option>
                    <option value="nb" data-harga="50000">NB</option>
                    <option value="citicolin" data-harga="50000">Citicolin</option>
                    <option value="metronidazole" data-harga="50000">Metronidazole</option>
                    <option value="methylprednisolone" data-harga="50000">Methylprednisolone</option>
                    <option value="asamtranex" data-harga="50000">Asam Tranex</option>
                    <option value="omeprazole" data-harga="55000">Omeprazole</option>
                    <option value="ketorolac30" data-harga="90000">Ketorolac 30mg</option>
                    <option value="ketorolac15" data-harga="45000">Ketorolac 15mg</option>
                    <option value="primperan" data-harga="40000">Primperan / Metoclo</option>
                    <option value="furo" data-harga="40000">Furo</option>
                    <option value="piracetam" data-harga="40000">Piracetam</option>
                    <option value="norages" data-harga="32000">Antrain / Norages</option>
                    <option value="ranitidine" data-harga="30000">Ranitidine</option>
                    <option value="ondansetron" data-harga="30000">Ondansetron</option>
                    <option value="dexa" data-harga="20000">Dexa</option>
                    <option value="recodrylk5c" data-harga="25000">Recodryl kurang 5cc</option>
                    <option value="recodryllb5c" data-harga="50000">Recodryl lebih 5cc</option>
                </select>

                @ Rp <span class="harga-injeksi">0</span>
                x <input type="number" class="qty-injeksi" min="1" value="1" required>
                = Rp <span class="total-injeksi">0</span>

                <button type="button" class="hapus-item">-</button>
                <button type="button" class="tambah-injeksi">+</button>
            </div>
        </div>

        <div class="jasakeperawatan">
            <h3>
                6. Jasa medis petugas keperawatan ( observasi kondisi pasien / hari )
            </h3>

            <p>@ cek tanda tanda vital tiap 8 jam (tensi, nadi, suhu, RR)</p>
            <p>@perkembangan kondisif pasien</p>
            <p>@ jasa injeksi obat obatan 3hari 3malam</p>
            <input type="number" id="jasakeperawatan" min="0" value="0" required />
            x Rp 85.000 = Rp <span id="total-jasakeperawatan">0</span><br />
        </div>

        <div class="admin">
            <h3>7. Administrasi</h3>
            <p>Administrasi & materai </p>
            <input type="number" id="administrasi" min="0" value="0" required /> x
            Rp 50.000 = Rp <span id="total-administrasi">0</span><br />
        </div>

        <div class="obatperawatan">
            <h3>8. Obat Selama Perawatan</h3>
            <input type="textarea" id="obat_perawatan" placeholder="Obat yang diberikan selama perawatan"
                 /><br />

            <input type="textarea" id="total_obat_perawatan"
                placeholder="harga obat yang diberikan selama perawatan" /><br />
        </div>

        <div class="obatpulang">
            <h3>9. Obat Bawa Pulang</h3>
            <input type="textarea" id="obat_bawapulang" placeholder="Obat Pulang"  /><br />
            <input type="text" id="total_obat_bawapulang" placeholder="harga obat yang dibawa pulang" /><br />
        </div>

        <h4>Total = <span id="total-biaya"></span></h4>
        <h4>Potongan =</h4>
        <h4>Total Akhir =</h4>

        <div class="biayatambahan">
            <div>
                <h3>- Biaya transport perawat</h3>
                <input type="number" id="qty-transportperawat" min="0" value="0" />
                x <span id="btransportperawat">0</span> = Rp
                <span id="total-biayatransportperawat">0</span><br />
            </div>

            <!-- Off jadwal -->
            <div>
                <h3>- Off Jadwal</h3>
                <input type="number" id="qty-transportperawat-offjadwal" min="0" value="0" />
                x <span id="btransportperawat-offjadwal">0</span> = Rp
                <span id="total-biayatransportperawat-offjadwal">0</span><br />
            </div>

            <h3>- Visite Dokter</h3>
            <div class="input-group">
                <select name="visite-dokter" required>
                    <option value="">-- Pilih Jarak --</option>
                    <option value="0 - 4 km">0 - 4 km</option>
                    <option value="4,1 - 5 km">4,1 - 5 km</option>
                    <option value="5,1 - 6 km">5,1 - 6 km</option>
                    <option value="6,1 - 7 km">6,1 - 7 km</option>
                    <option value="7,1 - 8 km">7,1 - 8 km</option>
                    <option value="8,1 - 9 km">8,1 - 9 km</option>
                    <option value="9,1 - 10 km">9,1 - 10 km</option>
                    <option value="10,1 - 11 km">10,1 - 11 km</option>
                </select>
            </div>
            <p>
                Paket Kunjungan 3 total visite: Rp
                <span id="biaya-visitedokter">0</span>
            </p>
        </div>

        <h3>Alat dan Bahan</h3>
        <div class="alatbahan-container" id="alatbahan-container">
            <div class="alatbahan">
                <select class="mcm-alatbahan">
                    <option value="handscoon" data-harga="6000">Handscoon</option>
                    <option value="spuit135" data-harga="5000">Spuit 1,3,5cc</option>
                    <option value="spuit10" data-harga="20000">Spuit 10cc</option>
                    <option value="spuit50" data-harga="50000">Spuit 50cc</option>
                    <option value="infusset" data-harga="27500">Infus set</option>
                    <option value="hypafix" data-harga="37500">Hypafix dll</option>
                    <option value="nasalcanul" data-harga="26000">Nasal canul</option>
                    <option value="maskernebul" data-harga="35000">Masker nebul</option>
                    <option value="nrbm" data-harga="50000">NRBM</option>
                    <option value="ngt" data-harga="120000">NGT</option>
                    <option value="kateter" data-harga="50000">Kateter</option>
                    <option value="kasasteril" data-harga="1000">Kasa Steril</option>
                </select>

                @ Rp <span class="harga-alatbahan">0</span>
                x <input type="number" class="qty-alatbahan" min="0" value="0" >
                = Rp <span class="total-alatbahan">0</span>

                <button type="button" class="hapus-item-alatbahan">-</button>
                <button type="button" class="tambah-alatbahan">+</button>
            </div>
        </div>
        <h3>Obat Oral dan Salep</h3>

        <div class="obatoralsalep-container" id="obatoralsalep-container">
            <div class="obatoralsalep">
                <select class="mcm-obatoralsalep">
                    <option value="microlax" data-harga="35000">Microlax</option>
                    <option value="antasydsyr" data-harga="15000">Antasyd syr</option>
                    <option value="obhsyr" data-harga="15000">OBH syr</option>
                    <option value="dulcolax" data-harga="15000">Dulcolax</option>
                    <option value="curbion" data-harga="20000">Curbion</option>
                    <option value="superhoid" data-harga="80000">Superhoid</option>
                    <option value="nexitra" data-harga="5500">Nexitra</option>
                    <option value="renabetik" data-harga="15000">Renabetik</option>
                    <option value="scabimite" data-harga="15000">Scabimite</option>
                    <option value="salepacyclovir" data-harga="10000">Salep Acyclovir</option>
                    <option value="salepketo" data-harga="10000">Salep Keto</option>
                    <option value="salepbeta" data-harga="10000">Salep Beta</option>
                    <option value="salepgenta" data-harga="8000">Salep Genta</option>
                    <option value="salepmata" data-harga="8000">Salep Mata</option>
                </select>

                @ Rp <span class="harga-obatoralsalep">0</span>
                x <input type="number" class="qty-obatoralsalep" min="0" value="0" required>
                = Rp <span class="total-obatoralsalep">0</span>

                <button type="button" class="hapus-item-obatoralsalep">-</button>
                <button type="button" class="tambah-obatoralsalep">+</button>
                <button type="button" class="hapus-semua-obatoralsalep">Hapus Semua</button>
            </div>
        </div>

        <h3>Jasa Jasa</h3>
        <div class="jasajasa-container" id="jasajasa-container">
            <div class="jasajasa">
                <select class="mcm-jasajasa">
                    <option value="pasangNGT" data-harga="80000">Jasa pasang NGT</option>
                    <option value="pasangkateter" data-harga="50000">Jasa pasang kateter</option>
                    <option value="lepaskateter" data-harga="40000">Jasa lepas kateter</option>
                </select>

                @ Rp <span class="harga-jasajasa">0</span>
                x <input type="number" class="qty-jasajasa" min="0" value="0" required>
                = Rp <span class="total-jasajasa">0</span>

                <button type="button" class="hapus-item-jasajasa">-</button>
                <button type="button" class="tambah-jasajasa">+</button>
                <button type="button" class="hapus-semua-jasajasa">Hapus Semua</button>
            </div>
        </div>

        <h4>Total = <span id="total-biaya-tambahan"></span></h4>
        <h4>Total yang harus dibayar= <span id="total-biaya-harusdibayar"></span></h4>


       <button type="button" id="btnWhatsapp" onclick="kirimWa()">WhatsApp</button>

    </form>
    <script src="harga-injeksi.js"></script>
    <script src="jarak-perawat.js"></script>
    <script src="alat-alat.js"></script>
    <script src="jasa-lepas-pasang-infus.js"></script>
    <script src="terapidokter.js"></script>
    <script src="harga-cairan.js"></script>
    <script src="visitedokter.js"></script>
    <script src="kewhatsapp.js"></script>
    <script src="hitung-alatbahan.js"></script>
    <script src="obatoralsalep.js"></script>
    <script src="jasajasa.js"></script>
    <script src="biayatambahan.js"></script>
    <script>
        //hitung jasa keperawatan
        document
            .getElementById("jasakeperawatan")
            .addEventListener("input", function () {
                let qty = parseInt(this.value) || 0; // kalau kosong dianggap 0
                let harga = 85000;
                let total = qty * harga;
                document.getElementById("total-jasakeperawatan").textContent =
                    total.toLocaleString("id-ID");
            });
        //hitung administrasi
        document
            .getElementById("administrasi")
            .addEventListener("input", function () {
                let qty = parseInt(this.value) || 0; // kalau kosong dianggap 0
                let harga = 50000;
                let total = qty * harga;
                document.getElementById("total-administrasi").textContent =
                    total.toLocaleString("id-ID");
            });

        // Hitung otomatis setiap kali input berubah
        document
            .querySelectorAll('.item input[type="number"]')
            .forEach((input) => {
                input.addEventListener("input", function () {
                    let harga = 50000;
                    let qty = parseInt(this.value) || 0;
                    let total = qty * harga;
                    this.nextElementSibling.nextElementSibling.textContent =
                        total.toLocaleString("id-ID");
                });
            });

        //penjumlahan akhir
        function updateTotalBiayaDibayar() {
            const biayaEl = document.getElementById("total-biaya");
            const tambahanEl = document.getElementById("total-biaya-tambahan");
            const harusBayarEl = document.getElementById("total-biaya-harusdibayar");

            if (!biayaEl || !tambahanEl || !harusBayarEl) return;

            const biaya = parseInt(biayaEl.textContent.replace(/[^\d]/g, ""), 10) || 0;
            const tambahan = parseInt(tambahanEl.textContent.replace(/[^\d]/g, ""), 10) || 0;

            const totalBayar = biaya + tambahan;

            harusBayarEl.textContent = totalBayar.toLocaleString("id-ID", {
                style: "currency",
                currency: "IDR",
                minimumFractionDigits: 0
            });
        }

        // Observer untuk memantau perubahan textContent
        function observeChanges(id, callback) {
            const target = document.getElementById(id);
            if (!target) return;

            const observer = new MutationObserver(callback);
            observer.observe(target, { childList: true, characterData: true, subtree: true });
        }

        // Pantau kedua elemen
        observeChanges("total-biaya", updateTotalBiayaDibayar);
        observeChanges("total-biaya-tambahan", updateTotalBiayaDibayar);

        // Panggil awal
        updateTotalBiayaDibayar();




    </script>
    <script src="kewhatsapp.js"></script>
    <script src="hitung-totalbiaya.js"></script>
    <script src="totaltambahan.js"></script>
</body>

</html>